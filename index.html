<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتبة إقرأ معنا - المكتبة الرقمية العربية</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- شريط التحميل -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="fas fa-book-open"></i>
            <p>جاري التحميل...</p>
        </div>
    </div>

    <!-- الرأس -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-book-reader"></i>
                    <h1>مكتبة إقرأ معنا</h1>
                </div>
                <div class="header-actions">
                    <button class="search-toggle" id="searchToggle">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="auth-btn" id="authBtn">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>تسجيل الدخول</span>
                    </button>
                </div>
            </div>
            
            <!-- شريط البحث -->
            <div class="search-container" id="searchContainer">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ابحث في المكتبة...">
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- القسم الرئيسي -->
    <main class="main">
        <div class="container">
            <!-- لوحة الإدارة (للمشرفين فقط) -->
            <div class="admin-panel" id="adminPanel" style="display: none;">
                <div class="admin-card">
                    <h2><i class="fas fa-cog"></i> لوحة الإدارة</h2>
                    <div class="upload-section">
                        <label for="pdfFile" class="upload-btn">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>رفع كتاب جديد</span>
                            <input type="file" id="pdfFile" accept=".pdf" multiple>
                        </label>
                        <div class="upload-progress" id="uploadProgress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <p id="progressText">جاري الرفع...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- إحصائيات المكتبة -->
            <div class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-book"></i>
                        <div class="stat-info">
                            <h3 id="totalBooks">0</h3>
                            <p>إجمالي الكتب</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-download"></i>
                        <div class="stat-info">
                            <h3 id="totalDownloads">0</h3>
                            <p>إجمالي التحميلات</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <div class="stat-info">
                            <h3>مجاني</h3>
                            <p>للجميع</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- فلتر الكتب -->
            <div class="filter-section">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">
                        <i class="fas fa-th"></i> جميع الكتب
                    </button>
                    <button class="filter-tab" data-filter="recent">
                        <i class="fas fa-clock"></i> الأحدث
                    </button>
                    <button class="filter-tab" data-filter="popular">
                        <i class="fas fa-fire"></i> الأكثر تحميلاً
                    </button>
                </div>
            </div>

            <!-- شبكة الكتب -->
            <div class="books-section">
                <div class="books-grid" id="booksGrid">
                    <!-- الكتب ستظهر هنا ديناميكياً -->
                </div>
                
                <!-- رسالة فارغة -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <i class="fas fa-book-open"></i>
                    <h3>لا توجد كتب بعد</h3>
                    <p>قم برفع أول كتاب لبدء مكتبتك الرقمية</p>
                </div>
            </div>
        </div>
    </main>

    <!-- نافذة عارض PDF -->
    <div class="pdf-modal" id="pdfModal">
        <div class="pdf-modal-content">
            <div class="pdf-modal-header">
                <h3 id="pdfTitle">عارض الكتاب</h3>
                <div class="pdf-controls">
                    <button class="pdf-btn" id="downloadPdf">
                        <i class="fas fa-download"></i> تحميل
                    </button>
                    <button class="pdf-btn" id="closePdf">
                        <i class="fas fa-times"></i> إغلاق
                    </button>
                </div>
            </div>
            <div class="pdf-viewer">
                <iframe id="pdfFrame" src="" frameborder="0"></iframe>
            </div>
        </div>
    </div>

    <!-- نافذة تأكيد الحذف -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-content">
            <h3><i class="fas fa-exclamation-triangle"></i> تأكيد الحذف</h3>
            <p>هل أنت متأكد من حذف هذا الكتاب؟ لا يمكن التراجع عن هذا الإجراء.</p>
            <div class="confirm-actions">
                <button class="btn btn-danger" id="confirmDelete">حذف</button>
                <button class="btn btn-secondary" id="cancelDelete">إلغاء</button>
            </div>
        </div>
    </div>

    <!-- التذييل -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-book-reader"></i> مكتبة إقرأ معنا</h4>
                    <p>مكتبة رقمية عربية مجانية للجميع</p>
                </div>
                <div class="footer-section">
                    <h4><i class="fas fa-info-circle"></i> حول المكتبة</h4>
                    <ul>
                        <li>قراءة مجانية</li>
                        <li>تحميل مباشر</li>
                        <li>تخزين سحابي آمن</li>
                        <li>واجهة عربية</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4><i class="fas fa-cog"></i> التقنيات</h4>
                    <ul>
                        <li>Google Drive API</li>
                        <li>تخزين سحابي</li>
                        <li>OAuth 2.0</li>
                        <li>HTML5 & CSS3</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 مكتبة إقرأ معنا. جميع الحقوق محفوظة.</p>
                <p>مدعوم بـ <i class="fab fa-google-drive"></i> Google Drive</p>
            </div>
        </div>
    </footer>

    <!-- تحميل المكتبات -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="script.js"></script>
</body>
</html>
